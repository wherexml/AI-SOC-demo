<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®‰å…¨åŠ©æ‰‹Bot - IMè”åŠ¨äº‹ä»¶æ¨é€åŸå‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#64748b',
                        accent: '#3b82f6',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                        success: '#10b981',
                        bot: '#f1f5f9',
                        user: '#3b82f6'
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'typing': 'typing 2s ease-in-out infinite'
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes typing {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
        .chat-bubble {
            animation: fadeIn 0.5s ease-in-out;
        }
        .typing-indicator {
            animation: typing 2s ease-in-out infinite;
        }
        .alert-card {
            border-left: 4px solid #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
        }
        .command-btn {
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        .command-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .status-processing {
            background: linear-gradient(135deg, #fef3c7, #fbbf24);
        }
        .status-success {
            background: linear-gradient(135deg, #d1fae5, #10b981);
        }
        .status-warning {
            background: linear-gradient(135deg, #fed7aa, #f97316);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-sm border-b border-gray-200 fixed w-full top-0 z-50">
        <div class="px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                        <i class="fas fa-robot text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-semibold text-gray-900">å®‰å…¨åŠ©æ‰‹Bot</h1>
                        <p class="text-xs text-green-500 flex items-center">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"></span>
                            åœ¨çº¿ - 24/7å®‰å…¨ç›‘æ§
                        </p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-500">
                        <i class="fas fa-clock mr-1"></i>
                        2025-06-21 11:39:01
                    </div>
                    <button class="p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- èŠå¤©ä¸»ä½“åŒºåŸŸ -->
    <div class="pt-20 pb-24 px-4 max-w-4xl mx-auto">
        <div id="chatContainer" class="space-y-6">
            <!-- æ¬¢è¿æ¶ˆæ¯ -->
            <div class="flex items-start space-x-3 chat-bubble">
                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="bg-white rounded-lg shadow-sm p-4 max-w-md">
                    <p class="text-sm text-gray-700">æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å®‰å…¨åŠ©æ‰‹Botï¼Œæ­£åœ¨ä¸ºæ‚¨è¿›è¡Œ24/7å®‰å…¨ç›‘æ§ã€‚</p>
                    <p class="text-xs text-gray-500 mt-2">ç³»ç»Ÿå·²å°±ç»ªï¼Œå¼€å§‹æ¨é€å®‰å…¨äº‹ä»¶...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨è¾“å…¥åŒºåŸŸ -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center space-x-3">
                <div class="flex-1 relative">
                    <input type="text" id="messageInput" 
                           placeholder="è¾“å…¥æ¶ˆæ¯æˆ–é€‰æ‹©ä¸Šæ–¹çš„æŒ‡ä»¤æŒ‰é’®..."
                           class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           disabled>
                </div>
                <button class="p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <p class="text-xs text-gray-500 mt-2 text-center">è¯·ä½¿ç”¨æŒ‡ä»¤æŒ‰é’®è¿›è¡Œæ“ä½œï¼Œæˆ–ç­‰å¾…Botæ¨é€æ–°çš„å®‰å…¨äº‹ä»¶</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // å®‰å…¨äº‹ä»¶æ•°æ®
        const securityEvents = [
            {
                id: 'A12',
                title: 'Apache Tomcat Manager æƒé™ç»•è¿‡æ–‡ä»¶ä¸Šä¼ ä»£ç æ‰§è¡Œæ¼æ´',
                level: 'é«˜å±',
                cve: 'CVE-2012-0394 / CVE-2009-3843',
                asset: '192.168.50.98:8080ï¼ˆç®¡ç†ç½‘æ®µï¼‰',
                sourceIP: '1.1.112.102ï¼ˆç¾å›½ï¼‰',
                detail: 'ç³»ç»Ÿæ•è·åˆ°å¯¹ /manager/html/upload çš„æ¶æ„ POST è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å› 200 OKï¼Œç–‘ä¼¼å·²ä¸Šä¼ æ¶æ„æ–‡ä»¶',
                gptResult: 'çœŸå®æ”»å‡»æˆåŠŸ',
                timestamp: '2025-06-21 11:39:01'
            },
            {
                id: 'B23',
                title: 'SQLæ³¨å…¥æ”»å‡»æ£€æµ‹',
                level: 'é«˜å±',
                cve: 'SQL Injection',
                asset: '192.168.50.156:3306ï¼ˆæ•°æ®åº“æœåŠ¡å™¨ï¼‰',
                sourceIP: '45.77.89.123ï¼ˆä¿„ç½—æ–¯ï¼‰',
                detail: 'æ£€æµ‹åˆ°é’ˆå¯¹ç”¨æˆ·ç™»å½•æ¥å£çš„SQLæ³¨å…¥å°è¯•ï¼Œå·²å°è¯•ç»•è¿‡èº«ä»½éªŒè¯',
                gptResult: 'ç–‘ä¼¼æ”»å‡»æˆåŠŸ',
                timestamp: '2025-06-21 11:45:32'
            },
            {
                id: 'C34',
                title: 'æš´åŠ›ç ´è§£æ”»å‡»',
                level: 'ä¸­å±',
                cve: 'Brute Force Attack',
                asset: '192.168.50.200:22ï¼ˆSSHæœåŠ¡ï¼‰',
                sourceIP: '103.45.67.89ï¼ˆå°åº¦ï¼‰',
                detail: 'æ£€æµ‹åˆ°é’ˆå¯¹SSHæœåŠ¡çš„å¤§é‡ç™»å½•å°è¯•ï¼ŒçŸ­æ—¶é—´å†…å¤±è´¥æ¬¡æ•°å¼‚å¸¸',
                gptResult: 'æ”»å‡»è¿›è¡Œä¸­',
                timestamp: '2025-06-21 11:52:15'
            }
        ];

        let currentEventIndex = 0;
        let processedEvents = new Set();
        let chatContainer = document.getElementById('chatContainer');
        let operationStats = { detail: 0, investigate: 0, block: 0, complete: 0 };

        // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©çª—å£
        function addMessage(content, isBot = true, delay = 1000) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const messageDiv = document.createElement('div');
                    messageDiv.className = `flex items-start space-x-3 chat-bubble ${isBot ? '' : 'flex-row-reverse space-x-reverse'}`;
                    
                    if (isBot) {
                        messageDiv.innerHTML = `
                            <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="bg-white rounded-lg shadow-sm max-w-3xl">
                                ${content}
                            </div>
                        `;
                    } else {
                        messageDiv.innerHTML = `
                            <div class="w-8 h-8 bg-user rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                            <div class="bg-user text-white rounded-lg shadow-sm p-4 max-w-md">
                                ${content}
                            </div>
                        `;
                    }
                    
                    chatContainer.appendChild(messageDiv);
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                    resolve();
                }, delay);
            });
        }

        // æ˜¾ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
        function showTypingIndicator(duration = 2000) {
            return new Promise((resolve) => {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex items-start space-x-3 typing-message';
                typingDiv.innerHTML = `
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm p-4">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.2s"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full typing-indicator" style="animation-delay: 0.4s"></div>
                        </div>
                    </div>
                `;
                
                chatContainer.appendChild(typingDiv);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                
                setTimeout(() => {
                    typingDiv.remove();
                    resolve();
                }, duration);
            });
        }

        // åˆ›å»ºå®‰å…¨äº‹ä»¶æ¶ˆæ¯
        function createSecurityEventMessage(event) {
            return `
                <div class="p-4 alert-card rounded-lg">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <span class="bg-red-500 text-white px-2 py-1 rounded text-xs font-bold">å®‰å…¨äº‹ä»¶é€šçŸ¥</span>
                            <span class="text-xs text-gray-600">${event.timestamp}</span>
                        </div>
                        <div class="flex items-center space-x-1">
                            <i class="fas fa-exclamation-triangle text-red-500"></i>
                            <span class="text-sm font-medium text-red-600">${event.level}</span>
                        </div>
                    </div>
                    
                    <p class="text-sm font-medium text-gray-800 mb-3">
                        æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„å®‰å…¨åŠ©æ‰‹ Botã€‚ç³»ç»Ÿäº ${event.timestamp} ç›‘æµ‹åˆ°ä¸€æ¡ <strong>${event.level}å®‰å…¨äº‹ä»¶</strong>ï¼Œè¯·åœ¨ <strong>90 åˆ†é’Ÿ</strong> å†…ç¡®è®¤å¹¶é€‰æ‹©å¤„ç½®æ–¹å¼ã€‚
                    </p>
                    
                    <div class="bg-white/70 rounded-lg p-3 mb-4 border-l-4 border-red-500">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                            <div><strong>GPTç ”åˆ¤ç»“è®ºï¼š</strong><span class="text-red-600">${event.gptResult}</span></div>
                            <div><strong>å¨èƒç­‰çº§ï¼š</strong><span class="text-red-600">${event.level}</span></div>
                            <div class="md:col-span-2"><strong>æ¼æ´ç±»å‹ï¼š</strong>${event.title}ï¼ˆ${event.cve}ï¼‰</div>
                            <div><strong>å—å½±å“èµ„äº§ï¼š</strong>${event.asset}</div>
                            <div><strong>æ”»å‡»æº IPï¼š</strong>${event.sourceIP}</div>
                            <div class="md:col-span-2"><strong>æ£€æµ‹è¯¦æƒ…ï¼š</strong>${event.detail}</div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-3 mb-4">
                        <p class="text-sm font-medium text-gray-700 mb-2">è¯·å›å¤ä»¥ä¸‹ä»»ä¸€æŒ‡ä»¤ï¼ˆ90 åˆ†é’Ÿå†…æœ‰æ•ˆï¼‰ï¼š</p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                            <button onclick="handleCommand('${event.id}', 'detail')" 
                                    class="command-btn bg-blue-500 text-white px-3 py-2 rounded text-sm hover:bg-blue-600">
                                <i class="fas fa-search mr-1"></i>${event.id}+è¯¦æƒ… â†’ æŸ¥çœ‹å®Œæ•´åŸå§‹æ—¥å¿—
                            </button>
                            <button onclick="handleCommand('${event.id}', 'investigate')" 
                                    class="command-btn bg-orange-500 text-white px-3 py-2 rounded text-sm hover:bg-orange-600">
                                <i class="fas fa-detective mr-1"></i>${event.id}+è°ƒæŸ¥ â†’ æŒ‡æ´¾è°ƒæŸ¥Agent
                            </button>
                            <button onclick="handleCommand('${event.id}', 'block')" 
                                    class="command-btn bg-red-500 text-white px-3 py-2 rounded text-sm hover:bg-red-600">
                                <i class="fas fa-shield-alt mr-1"></i>${event.id}+ä¸€é”®éåˆ¶ â†’ å°ç¦æ¶æ„å®ä½“
                            </button>
                            <button onclick="handleCommand('${event.id}', 'complete')" 
                                    class="command-btn bg-green-500 text-white px-3 py-2 rounded text-sm hover:bg-green-600">
                                <i class="fas fa-check mr-1"></i>${event.id}+æ ‡è®°å®Œæˆ â†’ å®Œæˆè¯¥äº‹ä»¶
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-between text-xs text-gray-500">
                        <span>äº‹ä»¶ID: ${event.id}</span>
                        <span>æµ‹è¯•é˜¶æ®µï¼Œå¦‚æœ‰æ‰“æ‰°æ•¬è¯·è°…è§£</span>
                    </div>
                </div>
            `;
        }

        // å¤„ç†æŒ‡ä»¤ç‚¹å‡»
        async function handleCommand(eventId, action) {
            const event = securityEvents.find(e => e.id === eventId);
            if (!event) return;

            // ç¦ç”¨æ‰€æœ‰ç›¸å…³æŒ‰é’®
            const buttons = document.querySelectorAll(`button[onclick*="${eventId}"]`);
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
            });

            // ç”¨æˆ·å›å¤æ¶ˆæ¯
            const commandTexts = {
                'detail': `${eventId}+è¯¦æƒ…`,
                'investigate': `${eventId}+è°ƒæŸ¥`,
                'block': `${eventId}+ä¸€é”®éåˆ¶`,
                'complete': `${eventId}+æ ‡è®°å®Œæˆ`
            };

            await addMessage(`<p class="text-sm">${commandTexts[action]}</p>`, false, 500);
            await showTypingIndicator(1500);

            // Botå›å¤
            let response = '';
            switch(action) {
                case 'detail':
                    response = createDetailResponse(event);
                    break;
                case 'investigate':
                    response = createInvestigateResponse(event);
                    break;
                case 'block':
                    response = createBlockResponse(event);
                    break;
                case 'complete':
                    response = createCompleteResponse(event);
                    break;
            }

            await addMessage(response);
            operationStats[action]++;
            
            // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°æ¼”ç¤ºè¦æ±‚
            checkDemoComplete();
        }

        // åˆ›å»ºè¯¦æƒ…å›å¤
        function createDetailResponse(event) {
            return `
                <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-file-alt text-blue-500 mr-2"></i>
                        <h4 class="font-semibold text-blue-800">äº‹ä»¶ ${event.id} - è¯¦ç»†ä¿¡æ¯</h4>
                    </div>
                    <div class="bg-white rounded p-3 mb-3">
                        <h5 class="font-medium text-gray-800 mb-2">åŸå§‹æ—¥å¿—ï¼š</h5>
                        <pre class="text-xs bg-gray-100 p-2 rounded overflow-x-auto text-gray-700">POST /manager/html/upload HTTP/1.1
Host: ${event.asset.split('ï¼ˆ')[0]}
User-Agent: Mozilla/5.0 (compatible; AttackBot/1.0)
Content-Type: multipart/form-data; boundary=----WebKit

------WebKit
Content-Disposition: form-data; name="deployWar"; filename="malware.war"
[æ¶æ„æ–‡ä»¶å†…å®¹å·²æˆªæ–­...]

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Upload successful. WAR deployed to /manager/html/malware</pre>
                    </div>
                    <div class="bg-white rounded p-3">
                        <h5 class="font-medium text-gray-800 mb-2">ä¸Šä¸‹æ–‡åˆ†æï¼š</h5>
                        <ul class="text-sm text-gray-700 space-y-1">
                            <li>â€¢ æ”»å‡»è€…ç»•è¿‡äº†Tomcat Managerçš„èº«ä»½éªŒè¯</li>
                            <li>â€¢ æˆåŠŸä¸Šä¼ äº†åä¸º"malware.war"çš„æ¶æ„æ–‡ä»¶</li>
                            <li>â€¢ è¯¥æ–‡ä»¶å·²è¢«éƒ¨ç½²åˆ°Webåº”ç”¨ç›®å½•</li>
                            <li>â€¢ å­˜åœ¨è¿›ä¸€æ­¥çš„æ¨ªå‘ç§»åŠ¨é£é™©</li>
                        </ul>
                    </div>
                    <div class="mt-3 flex items-center text-sm text-blue-600">
                        <i class="fas fa-info-circle mr-1"></i>
                        è¯¦ç»†ä¿¡æ¯æŸ¥çœ‹å®Œæˆï¼Œå»ºè®®ç«‹å³é‡‡å–éåˆ¶æªæ–½
                    </div>
                </div>
            `;
        }

        // åˆ›å»ºè°ƒæŸ¥å›å¤
        function createInvestigateResponse(event) {
            return `
                <div class="p-4 bg-orange-50 rounded-lg border border-orange-200">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-search text-orange-500 mr-2"></i>
                        <h4 class="font-semibold text-orange-800">è°ƒæŸ¥Agentå·²å¯åŠ¨ - äº‹ä»¶ ${event.id}</h4>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-white rounded p-3">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-700">è°ƒæŸ¥è¿›åº¦</span>
                                <span class="text-sm text-orange-600">è¿›è¡Œä¸­...</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-orange-500 h-2 rounded-full animate-pulse" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="bg-white rounded p-3">
                            <h5 class="font-medium text-gray-800 mb-2">åˆæ­¥è°ƒæŸ¥å‘ç°ï¼š</h5>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li>âœ“ æ”»å‡»æºIPå½’å±ï¼š${event.sourceIP}</li>
                                <li>âœ“ æ”»å‡»æ—¶é—´çª—å£ï¼šæŒç»­7åˆ†é’Ÿ</li>
                                <li>âœ“ åˆ©ç”¨çš„CVEæ¼æ´å·²ç¡®è®¤å­˜åœ¨äºç›®æ ‡ç³»ç»Ÿ</li>
                                <li>ğŸ” æ­£åœ¨åˆ†ææ¶æ„æ–‡ä»¶è¡Œä¸ºæ¨¡å¼...</li>
                                <li>ğŸ” æ­£åœ¨æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…¶ä»–å—å½±å“èµ„äº§...</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-100 rounded p-2 border-l-4 border-yellow-500">
                            <p class="text-sm text-yellow-800">
                                <i class="fas fa-exclamation-triangle mr-1"></i>
                                æ·±åº¦è°ƒæŸ¥é¢„è®¡éœ€è¦10-15åˆ†é’Ÿï¼Œå®Œæˆåå°†æä¾›è¯¦ç»†è°ƒæŸ¥æŠ¥å‘Š
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // åˆ›å»ºéåˆ¶å›å¤
        function createBlockResponse(event) {
            return `
                <div class="p-4 bg-red-50 rounded-lg border border-red-200">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-shield-alt text-red-500 mr-2"></i>
                        <h4 class="font-semibold text-red-800">ä¸€é”®éåˆ¶å·²æ‰§è¡Œ - äº‹ä»¶ ${event.id}</h4>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-white rounded p-3">
                            <h5 class="font-medium text-gray-800 mb-2">æ‰§è¡Œçš„å®‰å…¨æªæ–½ï¼š</h5>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center text-green-600">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span>æ¶æ„IP ${event.sourceIP.split('ï¼ˆ')[0]} å·²åŠ å…¥é»‘åå•</span>
                                </div>
                                <div class="flex items-center text-green-600">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span>å·²ç»ˆæ­¢å¯ç–‘çš„æ¶æ„è¿›ç¨‹</span>
                                </div>
                                <div class="flex items-center text-green-600">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span>å·²éš”ç¦»å—å½±å“èµ„äº§ ${event.asset.split('ï¼ˆ')[0]}</span>
                                </div>
                                <div class="flex items-center text-green-600">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span>å·²åˆ é™¤æ¶æ„ä¸Šä¼ æ–‡ä»¶</span>
                                </div>
                                <div class="flex items-center text-green-600">
                                    <i class="fas fa-check-circle mr-2"></i>
                                    <span>å·²åº”ç”¨ä¸´æ—¶å®‰å…¨è¡¥ä¸</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-green-100 rounded p-3 border-l-4 border-green-500">
                            <p class="text-sm text-green-800">
                                <i class="fas fa-check-circle mr-1"></i>
                                <strong>éåˆ¶æˆåŠŸï¼</strong>å¨èƒå·²è¢«æœ‰æ•ˆæ§åˆ¶ï¼Œç³»ç»Ÿå®‰å…¨çŠ¶æ€å·²æ¢å¤
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // åˆ›å»ºå®Œæˆå›å¤
        function createCompleteResponse(event) {
            return `
                <div class="p-4 bg-green-50 rounded-lg border border-green-200">
                    <div class="flex items-center mb-3">
                        <i class="fas fa-check-circle text-green-500 mr-2"></i>
                        <h4 class="font-semibold text-green-800">äº‹ä»¶ ${event.id} å·²æ ‡è®°å®Œæˆ</h4>
                    </div>
                    <div class="bg-white rounded p-3 mb-3">
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="font-medium text-gray-600">å¤„ç†æ—¶é—´ï¼š</span>
                                <span class="text-gray-800">3åˆ†é’Ÿ</span>
                            </div>
                            <div>
                                <span class="font-medium text-gray-600">æœ€ç»ˆçŠ¶æ€ï¼š</span>
                                <span class="text-green-600 font-medium">å·²å®Œæˆ</span>
                            </div>
                            <div>
                                <span class="font-medium text-gray-600">å¨èƒç­‰çº§ï¼š</span>
                                <span class="text-red-600">${event.level}</span>
                            </div>
                            <div>
                                <span class="font-medium text-gray-600">å¤„ç†ç»“æœï¼š</span>
                                <span class="text-green-600">å¨èƒå·²æ¶ˆé™¤</span>
                            </div>
                        </div>
                    </div>
                    <div class="bg-blue-50 rounded p-2 border-l-4 border-blue-400">
                        <p class="text-sm text-blue-700">
                            <i class="fas fa-info-circle mr-1"></i>
                            è¯¥äº‹ä»¶å·²å½’æ¡£è‡³å®‰å…¨äº‹ä»¶æ•°æ®åº“ï¼Œç›¸å…³æ—¥å¿—å·²ä¿å­˜ç”¨äºåç»­åˆ†æ
                        </p>
                    </div>
                </div>
            `;
        }

        // æ£€æŸ¥æ¼”ç¤ºå®Œæˆæƒ…å†µ
        async function checkDemoComplete() {
            const total = operationStats.detail + operationStats.investigate + operationStats.block + operationStats.complete;
            
            if (total === 5) {
                await new Promise(resolve => setTimeout(resolve, 2000));
                await showTypingIndicator(1500);
                await addMessage(`
                    <div class="p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200">
                        <div class="flex items-center mb-3">
                            <i class="fas fa-chart-bar text-blue-500 mr-2"></i>
                            <h4 class="font-semibold text-blue-800">æ¼”ç¤ºå®Œæˆç»Ÿè®¡</h4>
                        </div>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="bg-white rounded p-2">
                                <span class="font-medium text-gray-600">æŸ¥çœ‹è¯¦æƒ…ï¼š</span>
                                <span class="text-blue-600 font-bold">${operationStats.detail} æ¬¡</span>
                            </div>
                            <div class="bg-white rounded p-2">
                                <span class="font-medium text-gray-600">å¯åŠ¨è°ƒæŸ¥ï¼š</span>
                                <span class="text-orange-600 font-bold">${operationStats.investigate} æ¬¡</span>
                            </div>
                            <div class="bg-white rounded p-2">
                                <span class="font-medium text-gray-600">ä¸€é”®éåˆ¶ï¼š</span>
                                <span class="text-red-600 font-bold">${operationStats.block} æ¬¡</span>
                            </div>
                            <div class="bg-white rounded p-2">
                                <span class="font-medium text-gray-600">æ ‡è®°å®Œæˆï¼š</span>
                                <span class="text-green-600 font-bold">${operationStats.complete} æ¬¡</span>
                            </div>
                        </div>
                        <div class="mt-3 p-2 bg-green-100 rounded border-l-4 border-green-500">
                            <p class="text-sm text-green-800">
                                <i class="fas fa-trophy mr-1"></i>
                                <strong>æ¼”ç¤ºå®Œæˆï¼</strong>æ‚¨å·²ä½“éªŒäº†å®Œæ•´çš„IMè”åŠ¨å®‰å…¨äº‹ä»¶æ¨é€å’Œå¤„ç½®æµç¨‹ã€‚
                            </p>
                            <p class="text-xs text-green-700 mt-1">
                                éœ€æ±‚è¾¾æˆï¼šæ¨é€3æ¡äº‹ä»¶ âœ“ è°ƒæŸ¥${operationStats.investigate}æ¡ âœ“ å¤„ç½®${operationStats.block}æ¡ âœ“ æŸ¥çœ‹è¯¦æƒ…${operationStats.detail}æ¡ âœ“
                            </p>
                        </div>
                    </div>
                `);
            }
        }

        // è‡ªåŠ¨æ¨é€å®‰å…¨äº‹ä»¶
        async function startSecurityAlerts() {
            // ç­‰å¾…åˆå§‹å»¶è¿Ÿ
            await new Promise(resolve => setTimeout(resolve, 3000));

            for (let i = 0; i < securityEvents.length; i++) {
                await showTypingIndicator(2000);
                const eventMessage = createSecurityEventMessage(securityEvents[i]);
                await addMessage(eventMessage);
                
                // äº‹ä»¶é—´éš”
                if (i < securityEvents.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, 4000));
                }
            }

            // æ¨é€å®Œæˆæç¤º
            await new Promise(resolve => setTimeout(resolve, 3000));
            await showTypingIndicator(1500);
            await addMessage(`
                <div class="p-4 bg-gray-50 rounded-lg border border-gray-300">
                    <div class="flex items-center text-gray-700">
                        <i class="fas fa-info-circle mr-2"></i>
                        <span class="text-sm">å·²æ¨é€ <strong>${securityEvents.length} æ¡</strong>å®‰å…¨äº‹ä»¶ï¼Œè¯·é€‰æ‹©ç›¸åº”çš„å¤„ç½®æŒ‡ä»¤è¿›è¡Œæ“ä½œã€‚</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">æ¼”ç¤ºç›®æ ‡ï¼šè°ƒæŸ¥1æ¡ã€å¤„ç½®2æ¡ã€æŸ¥çœ‹è¯¦æƒ…2æ¡</p>
                </div>
            `);
        }

        // é¡µé¢åŠ è½½åå¼€å§‹æ¼”ç¤º
        document.addEventListener('DOMContentLoaded', function() {
            startSecurityAlerts();
        });
    </script>
</body>
</html> 